<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram äº‘å›¾åºŠ - å…è´¹å›¾ç‰‡æ‰˜ç®¡æœåŠ¡</title>
    
    <!-- SEOä¼˜åŒ– -->
    <meta name="description" content="åŸºäºTelegramäº‘å­˜å‚¨çš„å…è´¹å›¾åºŠæœåŠ¡ï¼Œæ”¯æŒCloudflare CDNå…¨çƒåŠ é€Ÿï¼Œæ°¸ä¹…ä¿å­˜">
    <meta name="keywords" content="å›¾åºŠ,å…è´¹å›¾åºŠ,Telegram,äº‘å­˜å‚¨,CDNåŠ é€Ÿ,å›¾ç‰‡æ‰˜ç®¡">
    
    <!-- å…ƒæ•°æ® -->
    <meta name="base-url" content="{{ base_url if base_url else '' }}">
    <meta name="cdn-domain" content="{{ cdn_domain if cdn_domain else '' }}">
    <meta name="static-version" content="{{ static_version }}">
    
    <!-- DNSé¢„è§£æ -->
    <link rel="dns-prefetch" href="//api.telegram.org">
    {% if cdn_domain %}
    <link rel="dns-prefetch" href="{{ cdn_domain }}">
    <link rel="preconnect" href="{{ cdn_domain }}" crossorigin>
    {% endif %}
    
    <!-- æ ·å¼è¡¨ -->
    <link rel="stylesheet" href="/static/css/styles.css?v={{ get_static_file_version('css/styles.css') }}">
    
    <!-- PWAæ”¯æŒ -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#6366f1">
</head>
<body>
    <div class="app-layout">
        <!-- å¯¼èˆªæ  -->
        <nav class="navbar">
            <div class="navbar-content">
                <a href="/" class="navbar-brand">
                    <span class="navbar-logo">â˜ï¸</span>
                    <span>Telegram äº‘å›¾åºŠ</span>
                    {% if cloudflare_cdn %}
                    <span class="cdn-badge">Cloudflare</span>
                    {% endif %}
                </a>
                <div class="navbar-actions">
                    <!-- ç®¡ç†å‘˜çŠ¶æ€ -->
                    <div class="admin-status" id="adminStatus" style="display: none;">
                        <span class="admin-user" id="adminUserDisplay"></span>
                        <button class="btn btn-secondary btn-sm" id="adminLogoutBtn">é€€å‡º</button>
                    </div>
                    
                    <!-- ç®¡ç†å…¥å£ -->
                    <a href="/admin" class="btn btn-secondary btn-sm">
                        <span>ğŸ”§</span>
                        <span>ç®¡ç†</span>
                    </a>
                    
                    <!-- ä¸»é¢˜åˆ‡æ¢ -->
                    <button class="theme-toggle" id="themeToggle" aria-label="åˆ‡æ¢ä¸»é¢˜">
                        <span class="theme-icon sun">â˜€ï¸</span>
                        <span class="theme-icon moon">ğŸŒ™</span>
                    </button>
                </div>
            </div>
        </nav>

        <!-- ä¸»å†…å®¹ -->
        <main class="main-content">
            <!-- HeroåŒºåŸŸ -->
            <section class="hero-section">
                <h1 class="hero-title">æé€Ÿå›¾ç‰‡æ‰˜ç®¡æœåŠ¡</h1>
                <p class="hero-subtitle">åŸºäº Telegram äº‘å­˜å‚¨ï¼Œæ°¸ä¹…ä¿å­˜ï¼Œå…¨çƒåŠ é€Ÿ</p>
                {% if cloudflare_cdn %}
                <div class="hero-badges">
                    <span class="badge" style="background: linear-gradient(135deg, #f48120, #f97316); color: white;">
                        Cloudflare CDN åŠ é€Ÿ
                    </span>
                    <span class="badge">è‡ªåŠ¨ç¼“å­˜ä¼˜åŒ–</span>
                </div>
                {% endif %}
            </section>

            <!-- ä¸Šä¼ åŒºåŸŸ -->
            <div class="upload-container" id="uploadArea">
                <div class="upload-icon">ğŸ“¤</div>
                <h2 class="upload-title">æ‹–æ‹½æˆ–ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡</h2>
                <p class="upload-subtitle">æ”¯æŒ JPGã€PNGã€GIFã€WEBP ç­‰æ ¼å¼ï¼Œå•æ–‡ä»¶æœ€å¤§ 20MB</p>
                <button class="btn btn-primary" id="selectBtn">é€‰æ‹©å›¾ç‰‡</button>
                <input type="file" id="fileInput" class="file-input" accept="image/*" multiple>
                {% if cloudflare_cdn %}
                <p class="upload-note">ğŸš€ è‡ªåŠ¨é€šè¿‡ Cloudflare CDN åˆ†å‘</p>
                {% endif %}
                
                <!-- è¿›åº¦æ¡ -->
                <div class="progress-container" id="progressContainer">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
            </div>

            <!-- ä¸Šä¼ ç»“æœ -->
            <div class="results-container" id="resultsContainer"></div>
        </main>

        <!-- é¡µè„š -->
        <footer class="footer">
            <div class="footer-content">
                <!-- ç»Ÿè®¡ä¿¡æ¯ -->
                <div class="footer-stats">
                    <div class="stat-item">
                        <span class="stat-label">æ€»æ–‡ä»¶æ•°:</span>
                        <span class="stat-value" id="totalFiles">--</span>
                    </div>
                    <span class="stat-divider">|</span>
                    <div class="stat-item">
                        <span class="stat-label">å­˜å‚¨ç©ºé—´:</span>
                        <span class="stat-value" id="totalSize">--</span>
                    </div>
                    <span class="stat-divider">|</span>
                    <div class="stat-item">
                        <span class="stat-label">è¿è¡Œæ—¶é—´:</span>
                        <span class="stat-value" id="uptime">--</span>
                    </div>
                    <span class="stat-divider">|</span>
                    <div class="stat-item">
                        <span class="stat-label">ä»Šæ—¥ä¸Šä¼ :</span>
                        <span class="stat-value" id="uploadSpeed">--</span>
                    </div>
                    {% if cloudflare_cdn %}
                    <span class="stat-divider">|</span>
                    <div class="stat-item">
                        <span class="stat-label">CDNç¼“å­˜:</span>
                        <span class="stat-value" id="cdnCached">--</span>
                    </div>
                    {% endif %}
                </div>
                
                <!-- CDNçŠ¶æ€ -->
                {% if cloudflare_cdn %}
                <div class="footer-info">
                    <p>
                        <span class="status-indicator"></span>
                        Cloudflare CDN æ­£å¸¸è¿è¡Œ
                    </p>
                </div>
                {% endif %}
                
                <!-- ç‰ˆæƒä¿¡æ¯ -->
                <p class="footer-info">
                    <a href="/admin" class="footer-link">ç®¡ç†åå°</a>
                    <span class="stat-divider">|</span>
                    <a href="https://github.com" class="footer-link" target="_blank">GitHub</a>
                </p>
                <p class="footer-info">
                    Powered by Telegram Cloud Storage 
                    {% if cloudflare_cdn %}& Cloudflare CDN{% endif %}
                </p>
            </div>
        </footer>
    </div>

    <!-- Toastå®¹å™¨ -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- å…¨å±€é…ç½® -->
    <script>
        window.APP_CONFIG = {
            baseUrl: '{{ base_url if base_url else "" }}',
            cdnDomain: '{{ cdn_domain if cdn_domain else "" }}',
            cdnEnabled: {{ 'true' if cdn_enabled else 'false' }},
            cloudflareCdn: {{ 'true' if cloudflare_cdn else 'false' }},
            staticVersion: '{{ static_version }}'
        };
    </script>

    <!-- Service Workeræ³¨å†Œ -->
    <script>
        if ('serviceWorker' in navigator && location.protocol === 'https:') {
            navigator.serviceWorker.register('/sw.js?v=' + window.APP_CONFIG.staticVersion)
                .then(reg => console.log('Service Worker registered'))
                .catch(err => console.error('Service Worker failed:', err));
        }
    </script>

    <!-- ä¸»è„šæœ¬ -->
    <script src="/static/js/main.js?v={{ get_static_file_version('js/main.js') }}" defer></script>
</body>
</html>